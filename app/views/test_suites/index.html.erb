<p id="notice"></p>

<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <h1>Test Suites</h1>
    </div>
  </div>
  <div class="row">
    <% @test_suites.each do |test_suite| %>
      <% test_suite_run = test_suite.test_suite_runs.order(:id).last %>
      <div class="card test-suite" test-suite-id="<%= test_suite.id %>">
        <div class="card-block">
          <h4 class="card-title"><%= test_suite.name.titleize %></h4>
          <span class="text-muted"><%= test_suite.task_name %></span>
          <div class="chart-<%= test_suite.id %>"></div>
          <%= link_to 'Show', test_suite_path(test_suite), :class => 'btn btn-primary' %>
          <%= link_to 'Run', run_test_suite_path(test_suite), :class => 'btn btn-primary' %>
        </div>
        <div class="card-footer text-muted">
          <div class="row">
            <div class="col-sm-12">
              Last Run
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3">
              <%= test_suite_run.timestamp %>
            </div>
            <div class="col-sm-3">
              <% if test_suite_run.passed? %>
              Passed
              <% else %>
              Failed
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<script>
  graphs.dashboard();
</script>
